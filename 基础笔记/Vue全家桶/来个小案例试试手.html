<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>todolist案例 | Keanu&#39;s blogs</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Vuepress/assets/css/0.styles.eb9c1bd9.css" as="style"><link rel="preload" href="/Vuepress/assets/js/app.aa183c0d.js" as="script"><link rel="preload" href="/Vuepress/assets/js/3.b7a513fc.js" as="script"><link rel="preload" href="/Vuepress/assets/js/1.191fbec3.js" as="script"><link rel="preload" href="/Vuepress/assets/js/26.8026eab3.js" as="script"><link rel="prefetch" href="/Vuepress/assets/js/10.f0ebb578.js"><link rel="prefetch" href="/Vuepress/assets/js/11.c5a1849b.js"><link rel="prefetch" href="/Vuepress/assets/js/12.9c5335fd.js"><link rel="prefetch" href="/Vuepress/assets/js/13.07c2ad00.js"><link rel="prefetch" href="/Vuepress/assets/js/14.9847bcee.js"><link rel="prefetch" href="/Vuepress/assets/js/15.f80c2f2e.js"><link rel="prefetch" href="/Vuepress/assets/js/16.01fd9db5.js"><link rel="prefetch" href="/Vuepress/assets/js/17.9711f261.js"><link rel="prefetch" href="/Vuepress/assets/js/18.b75d6ee9.js"><link rel="prefetch" href="/Vuepress/assets/js/19.6d27ebf0.js"><link rel="prefetch" href="/Vuepress/assets/js/20.5a68c4e2.js"><link rel="prefetch" href="/Vuepress/assets/js/21.c45b42ef.js"><link rel="prefetch" href="/Vuepress/assets/js/22.b351bea5.js"><link rel="prefetch" href="/Vuepress/assets/js/23.ac2a1bd2.js"><link rel="prefetch" href="/Vuepress/assets/js/24.4f09ff7c.js"><link rel="prefetch" href="/Vuepress/assets/js/25.dbaea782.js"><link rel="prefetch" href="/Vuepress/assets/js/27.be51ed64.js"><link rel="prefetch" href="/Vuepress/assets/js/28.7f57225f.js"><link rel="prefetch" href="/Vuepress/assets/js/29.04346a05.js"><link rel="prefetch" href="/Vuepress/assets/js/4.c676006f.js"><link rel="prefetch" href="/Vuepress/assets/js/5.1db609ce.js"><link rel="prefetch" href="/Vuepress/assets/js/6.413ac5b7.js"><link rel="prefetch" href="/Vuepress/assets/js/7.bf39e5ec.js"><link rel="prefetch" href="/Vuepress/assets/js/8.1704c646.js"><link rel="prefetch" href="/Vuepress/assets/js/9.40e8cc6b.js">
    <link rel="stylesheet" href="/Vuepress/assets/css/0.styles.eb9c1bd9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Keanu's blogs</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Vuepress/" class="home-link router-link-active"><img src="/Vuepress/gettyimages-1202250586-1024x1024.jpg" alt="Keanu's blogs" class="logo"> <span class="site-name">Keanu's blogs</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Vuepress/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vuepress/categories/Node/" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/vue3/" class="nav-link"><i class="undefined"></i>
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/vue2/" class="nav-link"><i class="undefined"></i>
  vue2
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/Axios/" class="nav-link"><i class="undefined"></i>
  Axios
</a></li></ul></div></div><div class="nav-item"><a href="/Vuepress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Vuepress/基础笔记/" class="nav-link"><i class="undefined"></i>
  博客
</a></div><div class="nav-item"><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/.html" class="nav-link"><i class="undefined"></i>
  零散文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      下拉测试
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vuepress/js_base/array.html" class="nav-link"><i class="undefined"></i>
  分组a
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/js_base/function.html" class="nav-link"><i class="undefined"></i>
  分组b
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/Vuepress/gettyimages-1202250586-1024x1024.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>17</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>5</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#f47e60;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-npm" style="color:#f26d6d;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/Vuepress/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vuepress/categories/Node/" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/vue3/" class="nav-link"><i class="undefined"></i>
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/vue2/" class="nav-link"><i class="undefined"></i>
  vue2
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/categories/Axios/" class="nav-link"><i class="undefined"></i>
  Axios
</a></li></ul></div></div><div class="nav-item"><a href="/Vuepress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Vuepress/基础笔记/" class="nav-link"><i class="undefined"></i>
  博客
</a></div><div class="nav-item"><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/.html" class="nav-link"><i class="undefined"></i>
  零散文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      下拉测试
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vuepress/js_base/array.html" class="nav-link"><i class="undefined"></i>
  分组a
</a></li><li class="dropdown-item"><!----> <a href="/Vuepress/js_base/function.html" class="nav-link"><i class="undefined"></i>
  分组b
</a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>todolist案例</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">todolist案例</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Keanu</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>4/22/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Vue2</span></i></div></div> <div class="theme-reco-content content__default"><h3 id="第二十一节-todolist案例"><a href="#第二十一节-todolist案例" class="header-anchor">#</a> 第二十一节 todolist案例</h3> <h4 id="_4-1-总结"><a href="#_4-1-总结" class="header-anchor">#</a> 4.1 总结</h4> <ul><li>组件化编码流程：、</li></ul> <p>​		(1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p> <p>​		(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p> <p>​			(1).一个组件在用：放在组件自身即可。</p> <p>​     		(2). 一些组件在用：放在他们共同的父组件上（<span style="color:red;">状态提升</span>）。</p> <p>​		(3).实现交互：从绑定事件开始。</p> <ul><li>props适用于：</li></ul> <p>​		(1).父组件 ==&gt; 子组件 通信</p> <p>​		(2).子组件 ==&gt; 父组件 通信（要求父先给子一个函数）</p> <ul><li><p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p></li> <li><p>props传过来的若是对象类型的值，修改对象中的属性时（修改对象其中的某个属性，vue并不认为这是修改这个对象，所以不会报错）Vue不会报错，但不推荐这样做。</p></li></ul> <h4 id="_4-2-webstorage-浏览器的本地存储"><a href="#_4-2-webstorage-浏览器的本地存储" class="header-anchor">#</a> 4.2 WebStorage（浏览器的本地存储）</h4> <ul><li>现象：即使没有登陆，在搜索框内搜索内容和关闭浏览器重新打开后，搜索历史里面依然存有数据，这就涉及到浏览器的本地存储、且存入数据的形式是键值对</li></ul> <img src="屏幕截图 2022-08-09 160025.png" alt="屏幕截图 2022-08-09 160025" style="zoom:50%;"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// localStorage</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>localStorage<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>localStorage<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;saveData()&quot;</span><span class="token operator">&gt;</span>点我保存一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;readData()&quot;</span><span class="token operator">&gt;</span>点我读取一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;deleteData()&quot;</span><span class="token operator">&gt;</span>点我删除一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;deleteAllData()&quot;</span><span class="token operator">&gt;</span>点我清空一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> <span class="token operator">&gt;</span>
			<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'msg'</span><span class="token punctuation">,</span><span class="token string">'hello!!!'</span><span class="token punctuation">)</span>
                <span class="token comment">// 这里由于对象是window所以window可以不写</span>
				localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span>
				localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'msg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

				<span class="token keyword">const</span> result <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>

				<span class="token comment">// console.log(localStorage.getItem('msg3'))</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">deleteAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>sessionStorage<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>sessionStorage<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;saveData()&quot;</span><span class="token operator">&gt;</span>点我保存一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;readData()&quot;</span><span class="token operator">&gt;</span>点我读取一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;deleteData()&quot;</span><span class="token operator">&gt;</span>点我删除一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;deleteAllData()&quot;</span><span class="token operator">&gt;</span>点我清空一个数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> <span class="token operator">&gt;</span>
			<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'msg'</span><span class="token punctuation">,</span><span class="token string">'hello!!!'</span><span class="token punctuation">)</span>
				sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span>
				sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'msg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

				<span class="token keyword">const</span> result <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>

				<span class="token comment">// console.log(sessionStorage.getItem('msg3'))</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'msg2'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">function</span> <span class="token function">deleteAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><ul><li>总结：</li></ul> <ol><li><p>存储内容大小一般支持5MB左右（不同浏览器可能还不一样）</p></li> <li><p>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</p></li></ol> <ul><li><p>相关API：</p> <ol><li><p><code>xxxxxStorage.setItem('key', 'value');</code>
该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</p></li> <li><p><code>xxxxxStorage.getItem('person');</code></p> <p>​    该方法接受一个键名作为参数，返回键名对应的值。</p></li> <li><p><code>xxxxxStorage.removeItem('key');</code></p> <p>​    该方法接受一个键名作为参数，并把该键名从存储中删除。</p></li> <li><p><code>xxxxxStorage.clear()</code></p> <p>​    该方法会清空存储中的所有数据。</p></li> <li><p>键值对中的值要写成string，如果直接写成比如<code>('key', 666)</code>,到浏览器里会直接调用toString()方法把666变成字符串，</p> <p>​	如果后面想把数据写成对象，则需要JOSN</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 输出的时候也得先获取person，再用josn解析一下</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <ol start="4"><li><p>备注：</p> <ol><li>SessionStorage存储的内容会随着浏览器窗口关闭而消失。</li> <li>LocalStorage存储的内容，需要手动清除才会消失。</li> <li><code>xxxxxStorage.getItem(xxx)</code>如果xxx对应的value获取不到，那么getItem的返回值是null。</li> <li><code>JSON.parse(null)</code>的结果依然是null。JSON.parse(Udefined)会报错</li></ol></li></ol> <h4 id="_4-2-1todolist的本地缓存"><a href="#_4-2-1todolist的本地缓存" class="header-anchor">#</a> 4.2.1todolist的本地缓存</h4> <ul><li>自己的想法：</li></ul> <p>​		给todoArr写一个watch属性时刻监视着</p> <div class="language-js extra-class"><pre class="language-js"><code>监视属性watch：
					<span class="token number">1.</span>当被监视的属性变化时<span class="token punctuation">,</span> 回调函数自动调用<span class="token punctuation">,</span> 进行相关操作
					<span class="token number">2.</span>监视的属性必须存在，才能进行监视！！
					<span class="token number">3.</span><span class="token function">监视的两种写法：</span>
							<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>new <span class="token class-name">Vue</span><span class="token function">时传入watch配置</span>
							<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>通过vm<span class="token punctuation">.</span>$watch监视
<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isHot <span class="token operator">?</span> <span class="token string">'炎热'</span> <span class="token operator">:</span> <span class="token string">'凉爽'</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function">changeWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>isHot <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isHot
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token punctuation">{</span>
					<span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//immediate 立即调用的作用，初始值是false，改成true： 初始化时让handler调用一下</span>
					<span class="token comment">//handler什么时候调用？当isHot发生改变时。</span>
					<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isHot被修改了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>具体实现</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">todoArr</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
      
				<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'todos'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>​		使用watch监视todoArr，一旦添加或者删除等会引起todoArr数组的变化，这样localStorage.setItem会及时获取新的数组再把每一		项以键值对的形式存储起来</p> <ul><li>备注：</li></ul> <p>​		1、其中的deep：true（深度监视开启很重要）它能监视到这个对象中的属性，在这个案例中就监视到了input框是否勾选</p> <p>​			深度监视：</p> <p>​            (1).Vue中的watch默认不监测对象内部值的改变（一层）。</p> <p>​            (2).配置deep:true可以监测对象内部值改变（多层）。</p> <p>​        	备注：</p> <p>​            (1).Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以！</p> <p>​            (2).使用watch时根据数据的具体结构，决定是否采用深度监视。</p> <h4 id="_4-2-2-自定义组件指令"><a href="#_4-2-2-自定义组件指令" class="header-anchor">#</a> 4.2.2 自定义组件指令</h4> <ul><li>理解：自定义事件是相较于内置事件存在的比如 click、keyup。。。（但这些内置事件是给HTML元素用的）这里的自定义事件是给组件使用的</li></ul> <p><strong>子给父传递数据今天有三个方法可以实现：</strong></p> <p>1、通过父组件给子组件传递<strong>函数类型</strong>的props实现：子给父传递数据</p> <p>2、通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第一种写法，使用@或v-on）</p> <div class="language-js extra-class"><pre class="language-js"><code>
在app组件里这样写

<span class="token operator">&lt;</span>Student v<span class="token operator">-</span>on<span class="token operator">:</span>at<span class="token operator">=</span><span class="token string">&quot;getStudentName&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// v-on在谁身上就是在给谁绑定事件，由于v-on在student这个标签上，所以说是给student这个实例对象vc身上绑定事件，触发了这个事件</span>
<span class="token comment">// getStudentName这个函数就会被调用，当然getStudentName这个函数要写在当下这个app组件内部，直到触发at这个事件才会调用这个函数 -- 问题是怎么触发？</span>
<span class="token comment">// 这里关键是这个原则-----你给谁绑定了事件，那就找谁去</span>
    
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">import</span> Student <span class="token keyword">from</span> <span class="token string">'./components/Student'</span>
	<span class="token keyword">import</span> School <span class="token keyword">from</span> <span class="token string">'./components/School'</span>

	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'App'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>School<span class="token punctuation">,</span>Student<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'你好啊！'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">studentName</span><span class="token operator">:</span><span class="token string">''</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function">getSchoolName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App收到了学校名：'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">getStudentName</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// 使用...params接受后面的参数，接受后端params是一个数组</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App收到了学生名：'</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>params<span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>studentName <span class="token operator">=</span> name
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

在student组件里这样写

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;student&quot;</span><span class="token operator">&gt;</span>
        <span class="token comment">// 甭管怎么触发事件，实现这个功能的按钮得准备好了</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sendStudentlName&quot;</span><span class="token operator">&gt;</span>把学生名给App<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Student'</span><span class="token punctuation">,</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">'男'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function">sendStudentlName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// 轻而易举的可以拿到Student这个组件实例对象vc--用this，问题是接下来怎么触发这个事件</span>
				<span class="token comment">// 使用$emit方法触发Student组件实例身上的at事件</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">,</span><span class="token number">888</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">)</span>
                <span class="token comment">// 要用this.name别忘记了，而且后面可以继续传参</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 实现了子向父传递信息</span>
</code></pre></div><ul><li>可以这么理解：props的子传父是捕获、emit的子传父是冒泡</li> <li>值得注意的是：</li></ul> <p>​		并没有直接把getStudentName事件交给student组件，什么也没给student组件传，只是给他绑定了一个自定义事件，把					getStudentName当作回调函数在使用</p> <p>3、通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第二种写法，使用ref）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Student ref<span class="token operator">=</span><span class="token string">&quot;student&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    
<span class="token comment">// 在app组件里写一钩子</span>
<span class="token comment">// mounted写在哪里面就是哪一个组件挂载完毕，app只要挂载完毕</span>
    <span class="token comment">// this.$refs.student拿到student这个组件的实例对象</span>
    <span class="token comment">// .$on：当at这个事件触发的时候我要执行一个回调</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getStudentName<span class="token punctuation">)</span> <span class="token comment">//绑定自定义事件</span>
			<span class="token comment">// this.$refs.student.$once('atguigu',this.getStudentName) //绑定自定义事件（一次性）</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 这里$on的作用就是把at事件添加到student的vc上，所以student组件才能$emit调用：</span>
    mounted挂载完成时，手动将‘at’绑定到vc上，点击btn时，触发emit，将第二个参数发送给父组件被getStudentName函数接收，便会打印学生姓名
    
    <span class="token comment">// $on是绑定事件和v-on一样，在这里不也是 this.$refs.student拿到student这个组件的实例对象，然后绑定$on，只不过前者是在mounted中绑定后者是在普通的Student标签内绑定，而$emit是触发事件，这一块要搞清</span>
</code></pre></div><ul><li>2和3的区别：</li></ul> <p>2：在执行到<Student></Student>时，瞬间at事件就给student这个实例对象就绑定上了，模板一解析瞬间绑完了，就不是很灵活</p> <p>3：等三秒后才能绑定</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getStudentName<span class="token punctuation">)</span> <span class="token comment">//绑定自定义事件</span>
			<span class="token comment">// this.$refs.student.$once('atguigu',this.getStudentName) //绑定自定义事件（一次性）</span>
                <span class="token comment">// 2中也可以一次性的:&lt;Student v-on:at.once=&quot;getStudentName&quot;/&gt;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="_4-2-3自定义组件-销毁"><a href="#_4-2-3自定义组件-销毁" class="header-anchor">#</a> 4.2.3自定义组件-销毁</h4> <ul><li>理解：你给谁绑定的自定义事件你就找谁触发去、同理自定义事件在谁身上就找谁解绑去</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在student组件里写click事件，由按按钮触发这个click事件</span>
<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;unbind&quot;</span><span class="token operator">&gt;</span>解绑at事件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token comment">// 在methods里面对应写unbind方法</span>
<span class="token function">unbind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">)</span> <span class="token comment">//解绑一个自定义事件</span>
    <span class="token comment">// this.$off(['at','demo']) //解绑多个自定义事件</span>
    <span class="token comment">// this.$off() //解绑所有的自定义事件</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h6 id="涉及到生命周期的一些知识点"><a href="#涉及到生命周期的一些知识点" class="header-anchor">#</a> 涉及到生命周期的一些知识点</h6> <div class="language-js extra-class"><pre class="language-js"><code>Teardown watchers <span class="token punctuation">,</span> child components and enent listeners
</code></pre></div><ul><li>销毁vm实例的时候，原生dom事件能用因为 移除或者说拆卸这个事件监听不是指原始的dom事件监听，而是指自定义事件</li></ul> <p>在这里可以验证</p> <p>vc也可以用生命周期</p> <h4 id="_4-2-4自定义事件总结"><a href="#_4-2-4自定义事件总结" class="header-anchor">#</a> 4.2.4自定义事件总结</h4> <ol><li><p>一种组件间通信的方式，<strong>适用</strong>于：<strong style="color:red;">子组件 ===&gt; 父组件</strong></p></li> <li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style="color:red;">事件的回调在A中</span>）。</p></li> <li><p>绑定自定义事件：</p> <ol><li><p>第一种方式，在父组件中：<code>&lt;Demo @at=&quot;test&quot;/&gt;</code>  或 <code>&lt;Demo v-on:at=&quot;test&quot;/&gt;</code></p></li> <li><p>第二种方式，在父组件中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Demo ref<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p></li></ol></li> <li><p>触发自定义事件：<code>this.$emit('at',数据)</code></p></li> <li><p>解绑自定义事件<code>this.$off('at')</code></p></li> <li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。</p></li> <li><p>注意：通过<code>this.$refs.xxx.$on('atguigu',回调)</code>绑定自定义事件时，回调<span style="color:red;">要么配置在methods中</span>，<span style="color:red;">要么用箭头函数</span>，否则this指向会出问题！</p></li></ol> <ul><li>其中两个重要的注意点：</li></ul> <p>1、this的指向问题：</p> <p>使用ref方法实现子对父传信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在app组件内写</span>
<span class="token operator">&lt;</span>Student ref<span class="token operator">=</span><span class="token string">&quot;student&quot;</span> @click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">&quot;show&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">import</span> Student <span class="token keyword">from</span> <span class="token string">'./components/Student'</span>
	<span class="token keyword">import</span> School <span class="token keyword">from</span> <span class="token string">'./components/School'</span>

	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'App'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>School<span class="token punctuation">,</span>Student<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'你好啊！'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">studentName</span><span class="token operator">:</span><span class="token string">''</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function">getSchoolName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App收到了学校名：'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">getStudentName</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App收到了学生名：'</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>params<span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>studentName <span class="token operator">=</span> name
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'demo事件被触发了！'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getStudentName<span class="token punctuation">)</span> <span class="token comment">//绑定自定义事件后，触发自定义组件会调用这个回调函数，且这个回调函数也是写在app组件内部，那可不可以</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>studentName <span class="token operator">=</span> name<span class="token comment">// （studentName是data里面的一个数据）</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 直接这么写难道不对吗？</span>
<span class="token comment">// 不对，这个里面的this验证一下的话 他是student这个实例对象，为什么呢？：</span>
            <span class="token number">1</span>、vue是这么设计的，谁触发了这个自定义事件“at”，那么回调函数中的<span class="token keyword">this</span>就是谁
            <span class="token number">2</span>、vue承诺，如果你把函数写在了methods里面，并且还是一个普通函数，那么这个函数里面的<span class="token keyword">this</span>就是本体这个实例对象，所以一开始的写法虽然也是getStudentName回调函数，但是因为他写在了methods里且是普通函数，所以他里面的<span class="token keyword">this</span>是本体
            <span class="token number">3</span>、第二种方法也不是不行，只要把它写成箭头函数就行
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>studentName <span class="token operator">=</span> name<span class="token comment">// （studentName是data里面的一个数据）</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            	因为箭头函数没有自己的<span class="token keyword">this</span>，它会向外找，那<span class="token operator">**</span>所谓的外是哪？<span class="token operator">**</span>是mounted函数呀
            <span class="token number">4</span>、vue承诺只要在组件里写生命周期钩子，并且写得都是普通函数，那么也保你这里的<span class="token keyword">this</span>就是当前实例对象
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>2、组件使用原生组件</p> <p>vue2里需要加native，vue3就不需要了，不加的话会认为它是自定义组件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Student</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="总结一下那三个api"><a href="#总结一下那三个api" class="header-anchor">#</a> 总结一下那三个API</h4> <ul><li>$emit :是触发事件</li> <li>$on ：是绑定事件</li> <li>$off ：是解绑事件</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-3" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#第二十一节-todolist案例" class="sidebar-link reco-side-第二十一节-todolist案例" data-v-b57cc07c>第二十一节 todolist案例</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-1-总结" class="sidebar-link reco-side-_4-1-总结" data-v-b57cc07c>4.1 总结</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-2-webstorage-浏览器的本地存储" class="sidebar-link reco-side-_4-2-webstorage-浏览器的本地存储" data-v-b57cc07c>4.2 WebStorage（浏览器的本地存储）</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-2-1todolist的本地缓存" class="sidebar-link reco-side-_4-2-1todolist的本地缓存" data-v-b57cc07c>4.2.1todolist的本地缓存</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-2-2-自定义组件指令" class="sidebar-link reco-side-_4-2-2-自定义组件指令" data-v-b57cc07c>4.2.2 自定义组件指令</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-2-3自定义组件-销毁" class="sidebar-link reco-side-_4-2-3自定义组件-销毁" data-v-b57cc07c>4.2.3自定义组件-销毁</a></li><li class="level-6" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#涉及到生命周期的一些知识点" class="sidebar-link reco-side-涉及到生命周期的一些知识点" data-v-b57cc07c>涉及到生命周期的一些知识点</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#_4-2-4自定义事件总结" class="sidebar-link reco-side-_4-2-4自定义事件总结" data-v-b57cc07c>4.2.4自定义事件总结</a></li><li class="level-4" data-v-b57cc07c><a href="/Vuepress/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6/%E6%9D%A5%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B%E8%AF%95%E8%AF%95%E6%89%8B.html#总结一下那三个api" class="sidebar-link reco-side-总结一下那三个api" data-v-b57cc07c>总结一下那三个API</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/Vuepress/assets/js/app.aa183c0d.js" defer></script><script src="/Vuepress/assets/js/3.b7a513fc.js" defer></script><script src="/Vuepress/assets/js/1.191fbec3.js" defer></script><script src="/Vuepress/assets/js/26.8026eab3.js" defer></script>
  </body>
</html>
